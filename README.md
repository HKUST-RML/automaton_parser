# automaton_parser
A parser is developed to search through the automaton generated from gr1c and control the real robot.

This file is to execute the automaton generated by gr1c (http://scottman.net/2012/gr1c) on real robot platform UR10. gr1c is a collection of tools for GR(1) synthesis and related activities. In our example, an automaton are synthesized automatically to accomplish the task specified by the user, e.g. "pick up the object and put down". The robot actions are based on currently sensed environment. All the environment variables are sensed by AprilTag.
## Prerequisites

### Hardware
1. Universal Robot UR10
2. Robotiq 140mm Adaptive parallel-jaw gripper
3. Logitech HD 1080p camera
4. [AprilTag](https://april.eecs.umich.edu/wiki/AprilTags)

### Software
1. [ROS Kinetic](http://wiki.ros.org/kinetic/Installation/)
2. [Python library to control a robot from 'Universal Robots'](https://github.com/SintefManufacturing/python-urx)
3. [Universal Robot package for ROS Kinetic](http://wiki.ros.org/universal_robot)
4. [Robotiq ROS package](http://wiki.ros.org/robotiq/)
5. [gr1c](http://scottman.net/2012/gr1c)
6. [usb_cam](http://wiki.ros.org/usb_cam)
7. [apriltags_ros](http://wiki.ros.org/apriltags_ros)

## Get started
Please do the following steps for executing the automaton by GR(1) synthesis on UR10 robot.
1. Follow the tutorial in [Universal Robot package for ROS Kinetic](http://wiki.ros.org/universal_robot) and [Robotiq ROS package](http://wiki.ros.org/robotiq/) to set up hardware properly.
2. Download the repository to /ROS_WORK_SPACE/src, and build the package. Enter into the workspace
```
cd /ROS_WORK_SPACE/src
```
3. Open ```roscore``` and run Logitech HD 1080p camera in ROS.
```
roslaunch apriltags_ros apriltags_ros.launch
```
4. Specify the task in an .spc file. Please refer to https://tulip-control.github.io/gr1c/ for the correct format. ```/automaton_parser/src/example.spc``` is an example.
5. Run the python file ```python /automaton_parser/src/Parser_aut_ctl```.
6. Type in the .spc file name. You can see an automaton has emerged in the folder ```/automaton_parser/src```.
7. Open a new terminal and run the python file ```python /automaton_parser/src/Executer```.
8. If "Pub complete" emerges in the terminal where ```Executer``` runs, type ```Yes``` in the terminal where ```Parser_aut_ctl``` runs.
9. If "Pub complete" emerges in the terminal where ```Parser_aut_ctl``` runs, type ```Yes``` in the terminal where ```Executer``` runs.
10. If "Robot action callback" emerges in the terminal where ```Executer``` runs, type ```Yes``` in the terminal where ```Parser_aut_ctl``` runs. Observe the action of the robot.
